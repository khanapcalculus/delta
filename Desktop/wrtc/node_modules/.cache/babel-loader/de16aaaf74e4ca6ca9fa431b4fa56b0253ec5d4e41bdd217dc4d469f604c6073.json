{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\eniac\\\\Desktop\\\\wrtc\\\\src\\\\components\\\\Whiteboard.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useRef, useState } from 'react';\nimport { Layer, Line, Stage } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Whiteboard = ({\n  tool,\n  color,\n  strokeWidth,\n  onDrawing,\n  drawingData\n}) => {\n  _s();\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentPath, setCurrentPath] = useState([]);\n  const stageRef = useRef();\n  const handleMouseDown = useCallback(e => {\n    if (tool !== 'pen') return;\n\n    // Prevent stage dragging\n    e.target.getStage().draggable(false);\n    setIsDrawing(true);\n    const pos = e.target.getStage().getPointerPosition();\n    setCurrentPath([pos.x, pos.y]);\n  }, [tool]);\n  const handleMouseMove = useCallback(e => {\n    var _e$evt;\n    if (!isDrawing || tool !== 'pen') return;\n\n    // Prevent default touch behaviors\n    (_e$evt = e.evt) === null || _e$evt === void 0 ? void 0 : _e$evt.preventDefault();\n    const stage = e.target.getStage();\n    const point = stage.getPointerPosition();\n\n    // Capture all points for high fidelity (especially important for cursive/small writing)\n    setCurrentPath(prev => [...prev, point.x, point.y]);\n  }, [isDrawing, tool]);\n  const handleMouseUp = useCallback(e => {\n    var _e$evt2;\n    if (!isDrawing || tool !== 'pen') {\n      setIsDrawing(false);\n      setCurrentPath([]);\n      return;\n    }\n\n    // Prevent default touch behaviors\n    (_e$evt2 = e.evt) === null || _e$evt2 === void 0 ? void 0 : _e$evt2.preventDefault();\n    if (currentPath.length >= 4) {\n      const newStroke = {\n        id: Date.now() + Math.random(),\n        points: currentPath,\n        color: color,\n        strokeWidth: strokeWidth,\n        tool: tool,\n        timestamp: Date.now()\n      };\n      onDrawing(newStroke);\n    }\n    setIsDrawing(false);\n    setCurrentPath([]);\n  }, [isDrawing, tool, currentPath, color, strokeWidth, onDrawing]);\n\n  // Combine drawing data with current drawing path\n  const allLines = [...drawingData, ...(isDrawing && currentPath.length >= 4 ? [{\n    id: 'current',\n    points: currentPath,\n    color: color,\n    strokeWidth: strokeWidth,\n    tool: tool\n  }] : [])];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"whiteboard\",\n    style: {\n      flex: 1,\n      overflow: 'hidden'\n    },\n    children: /*#__PURE__*/_jsxDEV(Stage, {\n      width: 1200,\n      height: 2400,\n      onMouseDown: handleMouseDown,\n      onMousemove: handleMouseMove,\n      onMouseup: handleMouseUp,\n      onTouchStart: handleMouseDown,\n      onTouchMove: handleMouseMove,\n      onTouchEnd: handleMouseUp,\n      ref: stageRef,\n      draggable: false,\n      style: {\n        border: '2px solid #ddd',\n        background: 'white',\n        cursor: tool === 'pen' ? 'crosshair' : 'default',\n        touchAction: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        children: allLines.map(line => /*#__PURE__*/_jsxDEV(Line, {\n          points: line.points,\n          stroke: line.color || '#000000',\n          strokeWidth: line.strokeWidth || 2,\n          tension: 0.5,\n          lineCap: \"round\",\n          lineJoin: \"round\",\n          globalCompositeOperation: \"source-over\",\n          perfectDrawEnabled: false,\n          shadowForStrokeEnabled: false\n        }, line.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(Whiteboard, \"56nT10cAGWMyx5V7k892EVjTTBA=\");\n_c = Whiteboard;\nexport default Whiteboard;\nvar _c;\n$RefreshReg$(_c, \"Whiteboard\");","map":{"version":3,"names":["React","useCallback","useRef","useState","Layer","Line","Stage","jsxDEV","_jsxDEV","Whiteboard","tool","color","strokeWidth","onDrawing","drawingData","_s","isDrawing","setIsDrawing","currentPath","setCurrentPath","stageRef","handleMouseDown","e","target","getStage","draggable","pos","getPointerPosition","x","y","handleMouseMove","_e$evt","evt","preventDefault","stage","point","prev","handleMouseUp","_e$evt2","length","newStroke","id","Date","now","Math","random","points","timestamp","allLines","className","style","flex","overflow","children","width","height","onMouseDown","onMousemove","onMouseup","onTouchStart","onTouchMove","onTouchEnd","ref","border","background","cursor","touchAction","map","line","stroke","tension","lineCap","lineJoin","globalCompositeOperation","perfectDrawEnabled","shadowForStrokeEnabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/eniac/Desktop/wrtc/src/components/Whiteboard.js"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { Layer, Line, Stage } from 'react-konva';\n\nconst Whiteboard = ({ tool, color, strokeWidth, onDrawing, drawingData }) => {\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentPath, setCurrentPath] = useState([]);\n  const stageRef = useRef();\n\n  const handleMouseDown = useCallback((e) => {\n    if (tool !== 'pen') return;\n    \n    // Prevent stage dragging\n    e.target.getStage().draggable(false);\n    \n    setIsDrawing(true);\n    const pos = e.target.getStage().getPointerPosition();\n    setCurrentPath([pos.x, pos.y]);\n  }, [tool]);\n\n  const handleMouseMove = useCallback((e) => {\n    if (!isDrawing || tool !== 'pen') return;\n\n    // Prevent default touch behaviors\n    e.evt?.preventDefault();\n    \n    const stage = e.target.getStage();\n    const point = stage.getPointerPosition();\n    \n    // Capture all points for high fidelity (especially important for cursive/small writing)\n    setCurrentPath(prev => [...prev, point.x, point.y]);\n  }, [isDrawing, tool]);\n\n  const handleMouseUp = useCallback((e) => {\n    if (!isDrawing || tool !== 'pen') {\n      setIsDrawing(false);\n      setCurrentPath([]);\n      return;\n    }\n\n    // Prevent default touch behaviors\n    e.evt?.preventDefault();\n\n    if (currentPath.length >= 4) {\n      const newStroke = {\n        id: Date.now() + Math.random(),\n        points: currentPath,\n        color: color,\n        strokeWidth: strokeWidth,\n        tool: tool,\n        timestamp: Date.now()\n      };\n\n      onDrawing(newStroke);\n    }\n    \n    setIsDrawing(false);\n    setCurrentPath([]);\n  }, [isDrawing, tool, currentPath, color, strokeWidth, onDrawing]);\n\n  // Combine drawing data with current drawing path\n  const allLines = [\n    ...drawingData,\n    ...(isDrawing && currentPath.length >= 4 ? [{\n      id: 'current',\n      points: currentPath,\n      color: color,\n      strokeWidth: strokeWidth,\n      tool: tool\n    }] : [])\n  ];\n\n  return (\n    <div className=\"whiteboard\" style={{ flex: 1, overflow: 'hidden' }}>\n      <Stage\n        width={1200}\n        height={2400}\n        onMouseDown={handleMouseDown}\n        onMousemove={handleMouseMove}\n        onMouseup={handleMouseUp}\n        onTouchStart={handleMouseDown}\n        onTouchMove={handleMouseMove}\n        onTouchEnd={handleMouseUp}\n        ref={stageRef}\n        draggable={false}\n        style={{ \n          border: '2px solid #ddd',\n          background: 'white',\n          cursor: tool === 'pen' ? 'crosshair' : 'default',\n          touchAction: 'none'\n        }}\n      >\n        <Layer>\n          {allLines.map((line) => (\n            <Line\n              key={line.id}\n              points={line.points}\n              stroke={line.color || '#000000'}\n              strokeWidth={line.strokeWidth || 2}\n              tension={0.5}\n              lineCap=\"round\"\n              lineJoin=\"round\"\n              globalCompositeOperation=\"source-over\"\n              perfectDrawEnabled={false}\n              shadowForStrokeEnabled={false}\n            />\n          ))}\n        </Layer>\n      </Stage>\n    </div>\n  );\n};\n\nexport default Whiteboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}